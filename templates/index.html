<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>水质检测报告系统</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding-top: 20px;
            background-color: #f8f9fa;
        }
        .tab-content {
            background: white;
            padding: 20px;
            border-radius: 0 0 5px 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .nav-tabs {
            background: white;
            border-radius: 5px 5px 0 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .table-container {
            max-height: 600px;
            overflow-y: auto;
        }
        .report-item {
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .report-item:hover {
            background-color: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center mb-4">水质检测报告系统</h1>

        <ul class="nav nav-tabs" id="mainTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#indicators-tab">指标管理</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#methods-tab">检测方法</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#standards-tab">限值标准</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#create-report-tab">创建报告</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#reports-tab">历史报告</button>
            </li>
        </ul>

        <div class="tab-content">
            <!-- 指标管理 -->
            <div class="tab-pane fade show active" id="indicators-tab">
                <h3>水质指标管理</h3>
                <form id="indicatorForm" class="mb-3">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <input type="text" class="form-control" id="indicatorName" placeholder="指标名称" required>
                        </div>
                        <div class="col-md-3">
                            <input type="text" class="form-control" id="indicatorUnit" placeholder="单位">
                        </div>
                        <div class="col-md-3">
                            <input type="text" class="form-control" id="indicatorDesc" placeholder="描述">
                        </div>
                        <div class="col-md-2">
                            <button type="submit" class="btn btn-primary w-100">添加指标</button>
                        </div>
                    </div>
                </form>
                <div class="table-container">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>指标名称</th>
                                <th>单位</th>
                                <th>描述</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="indicatorsList"></tbody>
                    </table>
                </div>
            </div>

            <!-- 检测方法 -->
            <div class="tab-pane fade" id="methods-tab">
                <h3>检测方法管理</h3>
                <form id="methodForm" class="mb-3">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <select class="form-select" id="methodIndicator" required>
                                <option value="">选择指标</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <input type="text" class="form-control" id="methodName" placeholder="方法名称" required>
                        </div>
                        <div class="col-md-3">
                            <input type="text" class="form-control" id="methodCode" placeholder="标准代号">
                        </div>
                        <div class="col-md-3">
                            <button type="submit" class="btn btn-primary w-100">添加方法</button>
                        </div>
                    </div>
                </form>
                <div class="table-container">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>关联指标</th>
                                <th>方法名称</th>
                                <th>标准代号</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="methodsList"></tbody>
                    </table>
                </div>
            </div>

            <!-- 限值标准 -->
            <div class="tab-pane fade" id="standards-tab">
                <h3>限值标准管理</h3>
                <form id="standardForm" class="mb-3">
                    <div class="row g-3">
                        <div class="col-md-2">
                            <select class="form-select" id="standardIndicator" required>
                                <option value="">选择指标</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <input type="text" class="form-control" id="standardName" placeholder="标准名称" required>
                        </div>
                        <div class="col-md-2">
                            <input type="number" step="any" class="form-control" id="standardMin" placeholder="最小值">
                        </div>
                        <div class="col-md-2">
                            <input type="number" step="any" class="form-control" id="standardMax" placeholder="最大值">
                        </div>
                        <div class="col-md-2">
                            <input type="number" step="any" class="form-control" id="standardExact" placeholder="固定值">
                        </div>
                        <div class="col-md-2">
                            <button type="submit" class="btn btn-primary w-100">添加标准</button>
                        </div>
                    </div>
                </form>
                <div class="table-container">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>关联指标</th>
                                <th>标准名称</th>
                                <th>最小值</th>
                                <th>最大值</th>
                                <th>固定值</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="standardsList"></tbody>
                    </table>
                </div>
            </div>

            <!-- 创建报告 -->
            <div class="tab-pane fade" id="create-report-tab">
                <h3>创建水质检测报告</h3>
                <form id="reportForm">
                    <div class="row g-3 mb-3">
                        <div class="col-md-3">
                            <label class="form-label">报告名称</label>
                            <input type="text" class="form-control" id="reportName" required>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">采样地点</label>
                            <input type="text" class="form-control" id="sampleLocation">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">采样日期</label>
                            <input type="date" class="form-control" id="sampleDate">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">采样人员</label>
                            <input type="text" class="form-control" id="sampler">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">天气</label>
                            <input type="text" class="form-control" id="weather">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">温度</label>
                            <input type="text" class="form-control" id="temperature">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">备注</label>
                            <input type="text" class="form-control" id="reportRemark">
                        </div>
                    </div>

                    <h5>检测数据</h5>
                    <button type="button" class="btn btn-success btn-sm mb-2" onclick="addReportRow()">+ 添加检测项</button>
                    <div class="table-container">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>指标</th>
                                    <th>检测方法</th>
                                    <th>限值标准</th>
                                    <th>检测值</th>
                                    <th>是否合格</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="reportDataRows"></tbody>
                        </table>
                    </div>

                    <button type="submit" class="btn btn-primary">提交报告</button>
                </form>
            </div>

            <!-- 历史报告 -->
            <div class="tab-pane fade" id="reports-tab">
                <h3>历史报告查询</h3>
                <div class="table-container">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>报告名称</th>
                                <th>采样地点</th>
                                <th>采样日期</th>
                                <th>创建时间</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="reportsList"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- 报告详情模态框 -->
    <div class="modal fade" id="reportDetailModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">报告详情</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="reportDetailContent"></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
